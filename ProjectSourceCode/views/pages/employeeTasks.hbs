<title> Employee Tasks </title>


{{! <style>
  .container { width: 33.33%; height: 90%; background-color: black; float: left;
  } .col-sm { text-align: center; display: flex; flex-direction: column; top:
  50; }

</style> }}

<div class="container-fluid" id="test">
  <div class="row h-full w-full">
    <div class="col-3" style="background-color:black">
      <button
        type="button"
        class="btn btn-primary mb-2"
        data-toggle="modal"
        data-target="#update-status"
      >Update Status</button>
      <button
        type="button"
        class="btn btn-primary"
        data-toggle="modal"
        data-target="#speak-with-manager"
      >Speak With Manager</button>
    </div>
    <div class="col-9">
      <div  onload="loadProgress('{{progress}}')">
        <h4>Task Progress</h4>
        <div class="progress">
          <div
           
            id="progress-bar"
            class="progress-bar"
            role="progressbar"
            style="width: 0%;"
            aria-valuenow="0"
            aria-valuemin="10"
            aria-valuemax="110"
          >0%</div>
        </div>
        <div class="container">
          <div class="row font-bold">
            <div class="col-sm">Task</div>
            <div class="col-sm">Description</div>
            <div class="col-sm">Status</div>
            <div class="col-2">Update Task</div>
          </div>
          {{#each tasks}}
            {{#if this.complete}}
            <div class="row h-1/6 p-2" style="background-color:palegreen">
            {{else}}
            <div class="row h-1/6 p-2" style="background-color: lightpink">
            {{/if}}
              <div class="col-sm" style="overflow:auto;max-height:100%">{{this.taskname}}</div>
              <div class="col-sm" style="overflow:auto;max-height:100%">{{this.taskdescription}}</div>
              <div class="col-sm" style="overflow:auto;max-height:100%">
                {{#if this.taskstatus}}
                  {{this.taskstatus}}
                {{else}}
                  N/A
                {{/if}}
              </div>
              <div class="col-2 p-2" onclick="testfunc('{{this.taskname}}', '{{this.taskstatus}}', '{{this.complete}}')"><button
        type="button"
        class="btn btn-primary "
        data-toggle="modal"
        data-target="#update-status"
      >Update Status</button></div>
            </div>
          {{/each}}
        </div>
      </div>

    </div>
  </div>
</div>

<div
  class="modal fade"
  id="update-status"
  tabindex="-1"
  role="dialog"
  aria-hidden="true"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="update-status-title">Update Status</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      
        <form action="/updateStatus" method="POST">
        <div class="modal-body">
          <input hidden id="taskname" name="taskname" value=""> 
          <div class="form-group">
            <label for="updated-task-status" class="col-form-label">Task Status:</label>
            <input type="text" class="form-control" name="status" id="updated-task-status" />
          </div>
          <div class="form-check">
            
            <input type="checkbox" id="complete" name="complete" class="form-check-input"/>
            <label for="complete" class="form-check-label">Completed?</label>
          </div>
        </div>
          <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary"
          data-dismiss="modal"
        >Exit Changes</button>
        <button type="submit" class="btn btn-primary">Update Status</button>
      </div>
        </form>
    </div>
  </div>
</div>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-6">
      <button type="button" class="btn btn-primary mb-2" data-toggle="modal" data-target="#update-status">
        Update Status
      </button>
    </div>
    <div class="col-md-6">
      <button type="button" class="btn btn-primary mb-2" data-toggle="modal" data-target="#speak-with-manager">
        Speak With Manager
      </button>
    </div>
  </div>
</div>

<div class="modal fade" id="update-status" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Update Status</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form action="/updateStatus" method="POST">
        <div class="modal-body">
          <input type="hidden" id="taskname" name="taskname" value="">
          <div class="form-group">
            <label for="updated-task-status" class="col-form-label">Task Status:</label>
            <input type="text" class="form-control" id="updated-task-status" name="status">
          </div>
          <div class="form-check">
            <input type="checkbox" id="complete" name="complete" class="form-check-input">
            <label for="complete" class="form-check-label">Completed?</label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Exit Changes</button>
          <button type="submit" class="btn btn-primary">Update Status</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="speak-with-manager" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Speak With Manager</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">Contact Manager</div>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="/js/update_tasks.js"></script>
<script src="/js/progress.js" progress="{{progress}}"></script>